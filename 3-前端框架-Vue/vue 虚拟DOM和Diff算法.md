- **vnode** (==虚拟DOM节点==)。
	- 真实DOM的轻量级抽象表示。避免频繁直接操作真实DOM，提升性能。
	- 虚拟DOM：虚拟DOM是一种广泛应用于多个前端框架的技术：React 最早普及了虚拟DOM的概念和应用。Vue 从Vue 2开始就采用了虚拟DOM。其他框架如Preact、Inferno等也使用这一技术。
- **diff算法**：==比较两棵虚拟DOM树的差异，找出需要更新的节点。==
	- 关键优化策略：
		- ==同层比较 ==复杂度由O(n3)降为O(n)
		- 类型不同将整个直接替换，不再深入比较
		- 列表对比中，使用key属性追踪身份，允许列表节点的复用和重排：
			- ![[Pasted image 20250308102750.png]]
		- 启发式算法处理更新模式
			- react中，双端对比
			- vue3中，快速路径检测
- 为什么要使用diff算法：
		- **Diff 算法的核心是解决直接操作 DOM 的性能问题**。浏览器操作真实DOM进行重绘和重排的成本高，结合虚拟DOM，通过diff算法比较新旧两棵虚拟DOM树的差异，计算出最小化的更新操作，从而减少真实DOM的操作消耗，提升性能
	- diff算法具体过程：
		- **逐层对比节点**，仅比较同级节点，若节点类型变化（比如从div变成span），则直接替换整棵子树。
		- **属性和组件更新**，如果类型不变，则更新组件属性，触发组件生命周期（如vue的updated钩子，react的componentDidUpdate）。
		- **子节点列表对比**，对于同一层级的子节点列表（比如一个ul下多个li）
			- vue2中我们采用双端比较（头尾指针）快速处理头尾增删。
			- vue3优化为快速diff，预先处理相同头尾，再通过最长递增子序列LIS优化乱序列表的移动次数。
			- react依赖key和双端比较，但受Fiber架构影响支持增量更新。
		- key的作用是唯一标识节点，避免不必要的DOM操作（如用index可能导致状态错乱）。
		- vue和react的diff实现区别在于列表对比策略，但核心思想（**同层比较、key优化**）一致。vue3的快速diff在复杂列表场景下表现更优，而react的优势在于fiber的调度能力。