TCP：transmition control protocol
- 在进行数据传输前，客户端和服务器必须先建立连接，建立过程就是 三次握手。
- 三次握手目的是为了互相确认收发能力正常。
	- （如果只有前两次，服务端是无法确定客户端能否正常接受自己的数据的）
- 三次握手过程：
	- **第一次握手**：客户端-》服务器   客户端请求建立连接
		- 发送带**SYN**标志（“我要建立连接~”）的数据包
		- 同时随机生成一个初始序列号 **seq=x**
			- 序列号seq（sequence number）标记字节在整个TCP流中的位置。这个初始序列号就是数据的起点。
		- 客户端状态：**变更为SYN_SEND**
	- **第二次握手**：服务器-》客户端   服务器确认连接请求并回应
		- 发送带**SYN+ACK**标志的数据包
			- ACK - 确认号 **ack=x+1**
				- 告诉客户端，我收到了你的SYN，下一步我期待你发seq=x+1开始的数据
		- 服务器生成自己的初始序列号 **seq=y**
		- 服务器状态：**变更为SYN-RCVD**
	- **第三次握手**：客户端-》服务器   客户端确认得到回应，连接建立完成
		- 发送ACK包
			- ACK - **ack=y+1**
		- 客户端状态：**ESTABLISHED**（连接建立）
		- 服务器状态：收到后也进入**ESTABLISHED**
	- 图示：![[6f3b2bf581d3009d49f6df00db16986.jpg]]
- 问：三次握手中可以携带数据吗？
	- 前两次握手主要是为了建立连接，不携带实际业务数据
	- 第三次握手可以携带数据，可以直接发送HTTP请求的首个数据包，可以减少延迟。
- 问：第三次握手丢了咋办？
	- 如果客户端发出的第三次握手（ACK）丢失，服务器会重发第二次握手（SYN+ACK），等客户端再发送ACK确认。
	- TCP内置了超时重传机制，会保障连接建立最终成功/或超时失败。

四次挥手
- 断开连接时